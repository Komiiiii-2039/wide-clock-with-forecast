## **時計＆天気予報Webアプリ 最終設計書**

### 1\. 概要

指定した地点（つくば市）の現在時刻と天気予報を、横長のディスプレイに最適化されたレイアウトで表示するWebアプリケーション。ユーザーの好みに合わせて複数のビジュアルテーマ（蛍光管スタイルなど）を切り替えられる機能を特徴とする。ホスティングはVercelを前提とする。

-----

### 2\. 主な機能

  * **時刻表示機能**
      * 現在の年月日と曜日を「M/D (曜日)」形式で表示する。
      * 現在の時刻を「HH:mm:ss」形式で1秒ごとにリアルタイム更新して表示する。
  * **天気予報表示機能**
      * 指定した地点名（TsUKUBA）を表示する。
      * 当日の最高気温と最低気温を表示する。
      * 現在の天気を表すアイコンを表示する。
      * 6時間ごと（0時, 6時, 12時, 18時, 24時）の天気予報をアイコンで簡易的に表示する。
  * **テーマ切り替え機能**
      * 複数のビジュアルテーマ（スタイル）から、好みのものを選択・切り替えることができる。

-----

### 3\. 技術スタック

  * **フロントエンド**: Next.js (Reactフレームワーク)
  * **スタイリング**: Tailwind CSS
  * **状態管理**: React Context または Zustand （テーマの状態をグローバルに管理するため）
  * **天気情報API**: OpenWeatherMap API
  * **ホスティング**: Vercel

-----

### 4\. 画面設計とUIレイアウト

画面全体は黒い枠線で囲まれた一つのコンテナとする。コンテナ内は大きく左右のセクションに分割する。

  * **左セクション（時刻エリア）**: 画面の左半分を占める。上部に年月日と曜日、その下に非常に大きなフォントで現在時刻を配置し、高い視認性を確保する。
  * **右セクション（天気エリア）**: 画面の右半分を占める。上から順に「地点名」「現在の天気アイコンと最高/最低気温」「6時間ごとの天気予報アイコン」を配置する。

-----

### 5\. ビジュアルスタイル（テーマ）

ユーザーが選択できる4つのテーマを用意する。テーマ切り替え用のUI（ボタン等）を画面の隅に配置する。

#### スタイル1：クラシック・シアン

真空管ディスプレイ（VFD）をイメージした、最も代表的なスタイル。

  * **背景**: 黒に近いダークグレー (`#111111`)
  * **テキスト**: 明るいシアン (`#00FFFF`)
  * **エフェクト**: CSSの`text-shadow`を使い、テキストがぼんやりと発光するグロー効果を適用する。
  * **フォント**: 7セグメントデジタルディスプレイ風のフォント（例: Google Fontsの`DSEG7`など）を使用する。

#### スタイル2：レトロ・グリーン

古いコンピュータ端末を彷彿とさせる、懐かしい雰囲気のスタイル。

  * **背景**: チャコールグレー (`#222222`)
  * **テキスト**: 発光する緑 (`#00FF00`)
  * **エフェクト**: グロー効果に加え、画面全体に微細な走査線（スキャンライン）のようなオーバーレイを追加して質感を高める。
  * **フォント**: ビットマップ風のフォント（例: Google Fontsの`VT323`）を使用する。

#### スタイル3：モダン・アンバー

暖色系で落ち着いた、洗練された印象のスタイル。

  * **背景**: 濃いネイビー (`#191933`)
  * **テキスト**: 温かみのある琥珀色 (`#FFBF00`)
  * **エフェクト**: 他のスタイルより控えめなグロー効果とし、モダンな印象を強調する。
  * **フォント**: 可読性の高いデジタル風サンセリフ体を使用する。

#### スタイル4：ライトモード

白を基調とした、フラットでクリーンなデフォルトスタイル。

  * **背景**: 白 (`#FFFFFF`)
  * **テキスト**: 黒 (`#000000`)
  * **エフェクト**: なし。視認性を最優先する。
  * **フォント**: モダンなサンセリフ体（例: Inter, Lato）を使用する。

-----

### 6\. コンポーネント設計

アプリケーションを以下のReactコンポーネントに分割して実装する。

  * `Clock.tsx`: 現在時刻と日付の表示とリアルタイム更新を担当。
  * `Weather.tsx`: 天気データの取得と保持、および天気関連コンポーネントの親となる。
  * `DailySummary.tsx`: 地点名、最高/最低気温、現在の天気アイコンを表示。
  * `HourlyForecast.tsx`: 6時間ごとの天気予報アイコンを行として表示。
  * `ThemeSwitcher.tsx`: ユーザーがテーマを切り替えるためのUIを提供。
  * `Layout.tsx` (または `_app.tsx`): アプリケーション全体のラッパー。選択されたテーマに応じて、ルート要素に適切なCSSクラスを付与する。

-----

### 7\. データフローと処理ロジック

  * **時刻の更新**: クライアントサイドで完結。`Clock.tsx`が`useEffect`と`setInterval`を用いて1秒ごとに時刻を更新する。
  * **天気情報の取得**:
    1.  **APIキーの保護**: OpenWeatherMapのAPIキーはフロントエンドに露出させない。`.env.local`ファイルに`OPENWEATHERMAP_API_KEY=あなたのキー`として保存する。
    2.  **データ取得フロー**: フロントエンド(`Weather.tsx`)がNext.jsのAPIルート(`pages/api/weather.ts`)にリクエストを送信する。APIルートはサーバーサイドで環境変数を用いて安全にOpenWeatherMap APIを叩き、必要なデータのみを加工してフロントエンドに返す。
  * **テーマの切り替え**:
    1.  ユーザーが`ThemeSwitcher.tsx`でテーマを選択する。
    2.  選択されたテーマ名（例: `cyan`）がグローバルな状態（React Contextなど）に保存される。
    3.  `Layout.tsx`が状態の変化を検知し、アプリケーションのルート要素のクラスを`theme-cyan`のように動的に変更する。
    4.  Tailwind CSSで、`.theme-cyan`の子孫要素に適用される専用のスタイル（文字色、背景色、`text-shadow`など）をあらかじめ定義しておく。

-----

### 8\. ディレクトリ構成

```
/
├── public/
│   └── (フォントファイルなどを配置)
├── src/
│   ├── components/
│   │   ├── Clock.tsx
│   │   ├── Weather.tsx
│   │   ├── DailySummary.tsx
│   │   ├── HourlyForecast.tsx
│   │   └── ThemeSwitcher.tsx
│   ├── contexts/ or store/
│   │   └── ThemeContext.tsx (テーマの状態管理)
│   └── pages/
│       ├── _app.tsx          # グローバルなレイアウトとテーマプロバイダーを配置
│       ├── index.tsx         # メインページ
│       └── api/
│           └── weather.ts    # 天気情報取得APIエンドポイント
├── .env.local                # 環境変数ファイル (APIキーを記述)
├── next.config.js
├── package.json
└── tailwind.config.js
```

-----

### 9\. デプロイ手順

1.  完成したプロジェクトをGitHubリポジトリにプッシュする。
2.  Vercelにログインし、対象のGitHubリポジトリをインポートして新規プロジェクトを作成する。
3.  Vercelのプロジェクト設定画面の「Environment Variables」にて、環境変数`OPENWEATHERMAP_API_KEY`を登録する。値にはOpenWeatherMapから取得したAPIキーを設定する。
4.  Vercelが自動でビルドとデプロイを実行する。以降、GitHubのmainブランチにプッシュするたびに自動で更新がデプロイされる。